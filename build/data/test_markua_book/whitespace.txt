# Whitespace

Newlines, blank lines, leading spaces, trailing spaces and such in Markua are called whitespace.

Whitespace is an essential tool in Markua. Whitespace is what makes the block elements and span elements what they are.

Talking about whitespace is kind of redundant since it's covered by the rest of the spec, but it's nice to collect all the rules here.

The goal for whitespace is for everything to just work as expected, with as few surprises or gross formatting characters as possible. Prose should just work. Poetry should just work. Code should just work. In this regard, Markua has broader design goals than Markdown.

Markdown is a tool for web writers. Markua is a tool for writers.

Below are the rules which combine to accomplish this.

## All Whitespace is Preserved in Code Blocks

Inside a code block, all whitespace is preserved. This includes leading and trailing whitespace, whether those are newlines, tabs or space characters.

This is a lot simpler that trying to construct rules which would be complex and potentially brittle.

## Trailing Whitespace is Ignored Except in Code Blocks

Trailing whitespace at the end of a line has no meaning in Markua. It is ignored, except in code blocks.

A> In Markdown, trailing whitespace sometimes has meaning. (You can add two spaces to the end of a line to force a line break.) However, since this is "invisible magic formatting", and since some text editors can be set to remove trailing spaces, this is ignored.

## Leading Whitespace at the Beginning of a Paragraph is Ignored

This way, you can write paragraphs and it does not matter whether you indent or your text editor does.

## Whitespace is Preserved Following a Single Newline

Poets: you're welcome. As discussed in [poetry](#poetry), you can write sonnets with no formatting characters.

Following a single (not double) newline:

* A single space produces a single space (a "non-breaking" space, or `&nbsp;`, in HTML).
* A single tab produces four spaces (four "non-breaking" spaces, or `&nbsp;&nbsp;&nbsp;&nbsp;`, in HTML).

## Multiple Spaces Inside a Paragpraph are Collapsed to a Single Space

This has many benefits, but the largest is that it means Markua books and documents look the same regardless of whether the author uses one space after a period or two spaces after a period.

## Newlines

In its handling of newlines, Markua is dramatically different than Markdown.

### Single Newlines Inside a Paragraph is a Line Break

A single newline inside a paragraph is a line break.

This lets you write poetry without any formatting characters. This is appropriate, since formatting characters are not very poetic.

#### Markua Syntax

```
I grant I never saw a goddess go;
My mistress when she walks treads on the ground.
     And yet, by heaven, I think my love as rare
     As any she belied with false compare.
```

#### HTML Output

<p>
I grant I never saw a goddess go;<br/>
My mistress when she walks treads on the ground.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;And yet, by heaven, I think my love as rare<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;As any she belied with false compare.<br/>
</p>

#### Example Output

{class: warning}
B> FIXME This is broken until Markua support is in Leanpub

I grant I never saw a goddess go;
My mistress when she walks treads on the ground.
     And yet, by heaven, I think my love as rare
     As any she belied with false compare.


### Two Newlines End The Block They Are In

Two newlines produce a blank line.

With one exception, a blank line ends whatever it is in.  It ends a heading, paragraph, list, aside, blurb, etc.

The only exception is inside a code block which is created with three backticks or tildes. In this case, you can have as many blank lines as you wish, and they are all output as part of the code block.

~~~
```

foo

bar

baz

```
~~~

### Single Newlines Inside a List, Aside or Blurb

A single newline inside a list, aside or blurb creates a new paragraph within that list item, aside or blurb. This can be used to create multi-paragraph list items, asides, blurbs, etc.

A> This alse means that there is no need for the 4 space indent feature of Markdown. Code blocks and other things can just be added to list items by adding a single newline.
