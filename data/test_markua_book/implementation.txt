# The Markua Implementation Reference

TODO

Need to have a user-neutral spec style writing of everything in here, possibly with grammar.

{#definitions}
## Definitions

There are a number of key terms which are used throughout the Markua specification.

book or document
: If this phrase is used to refer to the files that the author is writing in, it is used to refer to a Markua manuscript. If this phrase is used to refer to a finished product, then it is referring to the output files produced by a Markua Processor from a Markua manuscript.

ebook
: Ebooks, or electronic books, are typically available in PDF, EPUB and/or MOBI formats. A Markua manuscript can be turned into an ebook by Markua Processors that are capable of generating these formats.

Leanpub
: Leanpub is the startup that created Leanpub Flavoured Markdown and Markua. The company that created, owns and operates Leanpub is Ruboss Technology Corporation, a British Columbia, Canada company.

Leanpub Flavoured Markdown
: The format which was the predecessor to Markua. It was focused primarily on the generation of books from a superset of Markdown, minus inline HTML support.

Markua
: Markua is a plain text format designed for the writing of books and documents.

Markua manuscript
: Also called "manuscript" or "manuscript files", a Markua manuscript is the Markua-formatted UTF-8 text file or files that the author actually writes in. The Markua manuscript is used as input by Markua Processors to generate Markua output files.

Markua output files
: The formatted output files generated from Markua manuscripts by Markua Processors. The formats generated can include ebook formats (PDF, EPUB and MOBI) as well as HTML and InDesign formats, among others. Only the mapping to HTML is precisely specified.

Markua Processor
: A Markua Processor can turn a Markua manuscript into Markua output files.

must
: This is a requirement of Markua. Markua Processors must behave this way to be compliant with this specification.

newline
: This is a carriage return, line feed, or a carriage return followed by a line feed. Pressing the enter or return key on your keyboard will produce one of these combinations on most modern operating systems.

should
: This is recommended by Markua. Markua Processors should behave this way, but do not have to.

text content
: These are letters, numbers, punctuation, etc.

whitespace
: Whitespace is one or more consecutive spaces or tabs. It does not include not newlines.

{#implementor-rules}
## Rules and Guidelines for Implementors of Markua Processors

This entire spec is a set of rules and guidelines, but there are a few specific things to call out here:

* Markua Processors should have one comprehensive list of warnings to show Markua authors upon generating a Markua document with warnings in it.
* Markua Processors must not output generation errors and warnings into the text itself.
* Markua processors should provide warnings in situations where they can detect issues (e.g. "duplicate cross-reference", "not understood programming language", "unknown math processor", etc).
* Markua processors must not explode when encountering unsupported features that have legal Markua syntax (e.g. an unknown Math dialect or human language).
* Links to cross-references that don't correspond to an id that exists may either be created as a (broken, non-functional) link or be created as normal text (not a link).
* Crosslinks that reference an unused id may either be created as a (non-functional) link or be created as normal text (not a link) by a Markua Processor. The Markua Processor may also output a warning about this somewhere, but not in the actual document text itself.